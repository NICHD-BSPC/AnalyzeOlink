# ==============================================================================
# ANALYZEOLINK GLOBAL CONFIGURATION
# ==============================================================================
# This file serves as the central control for the analysis pipeline.
# detailed requirements for input formats and parameters are documented
# in the comments below.

# ------------------------------------------------------------------------------
# 1. REPORT SELECTION via SNAKEMAKE
# ------------------------------------------------------------------------------
# List the analysis components to run via Snakemake.
# - To disable a report, comment it out with '#'.
# - NOTE: _pea scripts depend on differential_expression.Rmd
#         _elisa scripts depend on elisa.Rmd
snakemake:
  RMD_FILES:
    - differential_expression
    - assumptions_pea
    - annotations_pea
    - sensitivity_pea
    - covariates_pea
    - correlations_pea
    # - elisa              # Enable if analyzing ELISA data
    # - assumptions_elisa  # Enable if analyzing ELISA data

# ------------------------------------------------------------------------------
# 2. INPUT DATA PATHS
# ------------------------------------------------------------------------------
# Specify paths to the raw assay data.
# Supported formats: .csv, .xlsx, .parquet, .txt, .zip.
# NOTE: 'pea_test_data.tsv' and 'elisa_test_data.tsv' are reserved for internal test data.
# Inspect the test data generated by "../data/test_data.R" to see what format your Olink
# data and metadata need to be in.
input_data_paths:
  PEA: '../data/PEA/pea_test_data.tsv'
  ELISA: '../data/ELISA/elisa_test_data.tsv'

# ------------------------------------------------------------------------------
# 3. METADATA (SAMPLE TABLE) PATHS
# ------------------------------------------------------------------------------
# Specify paths to the sample metadata tables (.tsv format required).
#
# REQUIRED COLUMNS:
#   1. 'SampleID' : Must match sample names in the input data files exactly.
#   2. Grouping Column : A column defining your experimental groups (e.g. 'Group',
#      'Timepoint', 'Disease') used for contrasts. Continuous effects are also supported.
#   3. Covariates (Optional): Any columns used for adjustment (e.g. 'Age', 'Sex').
sampletable_paths:
  PEA: '../data/PEA/pea_test_metadata.tsv'
  ELISA: '../data/ELISA/elisa_test_metadata.tsv'

# ------------------------------------------------------------------------------
# 4. CENTRAL OUTPUT PATHS
# ------------------------------------------------------------------------------
# These .Rds files are generated by the primary analysis scripts and consumed
# by downstream reports (sensitivity, assumptions, etc.).
output_data_paths:
  PEA: '../rmds/differential_expression.Rds'
  ELISA: '../rmds/elisa.Rds'

# ------------------------------------------------------------------------------
# 5. PLOTTING & QC SETTINGS
# ------------------------------------------------------------------------------
# Define which columns from the sample table should be used to color QC plots.
qc_plot_color_column:
  plotly:         # Include column namers here if you want to generate interactive plots
  ggplot:
    - 'Group'     # Column name for static QC plots

# Which proteins should be explicitly labeled on Volcano and Sensitivity plots?
# Format: "Assay_Panel" (underscore separated).
# Note: To configure labels for new custom contrasts (e.g. treatment_vs_control),
# you must add a matching entry here and update the conditional logic in `plots.R`.
label_on_plots:
  disease_vs_control:
    - "TSLP_Olink Inflammation"
    - "DPP4_Olink Cardiometabolic"
    - "LAP TGF-beta-1_Olink Inflammation"
    - "IL7_Olink Inflammation"

# ------------------------------------------------------------------------------
# 6. STATISTICAL SETTINGS
# ------------------------------------------------------------------------------
# Global significance threshold (p-value or FDR, depending on context in Rmd)
alpha: 0.10

# Parallelization settings for run_tests() and enrich()
parallel: TRUE
cores: 1   # Number of contrasts to process simultaneously

# Functional Enrichment Settings
enrichment:
  methods:
    - 'ORA'
    - 'GSEA'
  organism: 'human'
  ontology: 'MSigDb' # Options: "MSigDb" (includes C2/C5), "KEGG", "GO", "Reactome"

# ------------------------------------------------------------------------------
# 7. FILE SYSTEM OUTPUT STRUCTURE
# ------------------------------------------------------------------------------
# Defines where specific results are saved. Generally, these do not need editing.
output_paths:
  differential_expression:
    raw_data: '../output/differential_expression/raw_data'
    filtered_data: '../output/differential_expression/filtered_data'
    qc: '../output/differential_expression/qc'
    results: '../output/differential_expression/results'
    plots: '../output/differential_expression/plots'
    upset: '../output/differential_expression/upset'
  elisa:
    raw_data: '../output/elisa/raw_data'
    filtered_data: '../output/elisa/filtered_data'
    qc: '../output/elisa/qc'
    results: '../output/elisa/results'
    plots: '../output/elisa/plots'
    upset: '../output/elisa/upset'
  sensitivity_pea:
    plots: '../output/sensitivity_pea/plots'
  assumptions_pea:
    results: '../output/assumptions_pea/results'
    plots: '../output/assumptions_pea/plots'
  assumptions_elisa:
    results: '../output/assumptions_elisa/results'
    plots: '../output/assumptions_elisa/plots'
  annotations_pea:
    raw_data: '../output/annotations_pea/raw_data'
    results: '../output/annotations_pea/results'
    plots: '../output/annotations_pea/plots'
  annotations_elisa:
    raw_data: '../output/annotations_elisa/raw_data'
    results: '../output/annotations_elisa/results'
    plots: '../output/annotations_elisa/plots'
  covariates_pea:
    results: '../output/covariates_pea/results'
    plots: '../output/covariates_pea/plots'
  correlations_pea:
    plots: '../output/correlations_pea/plots'
    results: '../output/correlations_pea/results'
  functional_enrichment_pea:
    results: '../output/functional_enrichment_pea/results'
    plots: '../output/functional_enrichment_pea/plots'
